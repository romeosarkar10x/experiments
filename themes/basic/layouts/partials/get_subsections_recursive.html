{{ $site := .site }}
{{ $sectionPath := .sectionPath }}

{{ range (partial "get_subsections.html" (dict "site" $site "sectionPath" $sectionPath "type" "leaf")) }}
    <li><a href="{{ add $sectionPath . }}">{{ . }}</a></li>
{{ end }}

{{ range (partial "get_subsections.html" (dict "site" $site "sectionPath" $sectionPath "type" "parent")) }}
    {{ $sectionPathCurrent := add $sectionPath . }}
    <details
        ><summary><a href="{{ $sectionPathCurrent }}">{{ . }}</a></summary
        ><ul
            >{{ partial "get_subsections_recursive.html" (dict "site" $site "sectionPath" $sectionPathCurrent) }}</ul
        >
    </details>
{{ end }}
