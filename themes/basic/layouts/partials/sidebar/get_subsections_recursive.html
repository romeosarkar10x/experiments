{{ $site := .site }}
{{ $sectionPath := .sectionPath }}
{{ $context := .context }}

{{ range (partial "sidebar/get_subsections.html" (dict "site" $site "sectionPath" $sectionPath "type" "leaf")) }}
    {{ $link := add $sectionPath . }}
    {{ if eq $link $context.RelPermalink }}
        <li
            ><div
                ><a href="{{ $link }}"><strong>{{ strings.TrimSuffix "/" . }}</strong></a></div
            ></li
        >
    {{ else }}
        <li
            ><div><a href="{{ $link }}">{{ strings.TrimSuffix "/" . }}</a></div></li
        >
    {{ end }}
{{ end }}

{{ range (partial "sidebar/get_subsections.html" (dict "site" $site "sectionPath" $sectionPath "type" "parent")) }}
    {{ $sectionPathCurrent := add $sectionPath . }}
    <details
        ><summary
            ><div
                ><a href="{{ $sectionPathCurrent }}">{{ strings.TrimSuffix "/" . }}</a>
                <svg
                    aria-hidden="true"
                    class="caret"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="red">
                    <use href="#caret-icon"></use></svg></div></summary
        ><ul
            >{{ partial "sidebar/get_subsections_recursive.html" (dict "context" $context "site" $site "sectionPath" $sectionPathCurrent) }}</ul
        >
    </details>
{{ end }}
